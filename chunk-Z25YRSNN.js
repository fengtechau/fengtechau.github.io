import{$ as O,Ab as X,Bb as Y,Db as Z,Eb as Q,Gb as W,Ha as d,Hb as tt,Ia as a,Ib as et,J as G,Ja as s,Jb as nt,Ka as k,Mb as it,N as H,Na as E,Nb as ot,O as I,Ob as rt,Pa as h,Pb as F,Qa as v,S as y,T as B,Ta as N,Va as c,Wa as C,Xa as f,Ya as z,Z as V,Za as b,_a as _,a as S,ab as j,b as w,d as T,i as L,ka as l,mb as $,nb as q,ob as K,pb as U,ua as D,v as A,xa as x,zb as J}from"./chunk-57RFM4T6.js";var st=(()=>{class r{constructor(t){this.zone=t,this.lookaheadMs=25,this.scheduleAheadTime=.12,this.clickMs=30,this.nextNoteTime=0,this.beatIndex=0,this.levelIndex=0,this.timerStartAt=0,this.stopwatchStartAt=0,this.stopwatchAccumulated=0,this.pattern=[],this.stateSubject=new L({isRunning:!1,bpm:120,timeSignature:"4/4",accentFirstBeat:!0,beatsPerBar:4,denominator:4,currentBeatIndex:0,currentLevelIndex:0,elapsedMs:0,groupingPreset:"none",accentBeats:[0],stopwatchRunning:!1}),this.state$=this.stateSubject.asObservable(),this.rebuildPattern()}applyPreset(t){let e=this.getState(),n=e.beatsPerBar,o=e.denominator;for(let i=0;i<n;i++)for(let u=0;u<this.pattern[i].length;u++)this.pattern[i][u]=u===0;if(t!=="mainOnly"){if(o===4){if(t==="allAnd"||t==="andAndSixteenth")for(let i=0;i<n;i++)this.pattern[i][2]=!0;if(t==="allSixteenth"||t==="andAndSixteenth")for(let i=0;i<n;i++)this.pattern[i][1]=!0,this.pattern[i][3]=!0}else if(t==="allSixteenth"||t==="andAndSixteenth")for(let i=0;i<n;i++)this.pattern[i][1]=!0}}getState(){return this.stateSubject.value}getPattern(){return this.pattern}getLevels(){let{denominator:t}=this.getState();return t===4?["q","e","s16a","s16b"]:["e","s16"]}getAvailableGroupings(){let t=this.getState();return t.denominator!==8?["none"]:t.beatsPerBar===6?["none","3+3","2+2+2"]:t.beatsPerBar===8?["none","2+2+2+2","3+3+2","2+3+3","3+2+3"]:["none"]}setBpm(t){t=Math.max(20,Math.min(300,Math.round(t))),this.patchState({bpm:t})}setTimeSignature(t){this.patchState({timeSignature:t}),this.rebuildPattern(),this.getState().isRunning&&this.resetTransport();let e=this.getState();if(e.denominator===8){let n=e.beatsPerBar===6?"3+3":e.beatsPerBar===8?"3+3+2":"none";this.setGrouping(n)}else this.setGrouping("none")}setAccentFirstBeat(t){this.patchState({accentFirstBeat:t})}setGrouping(t){this.patchState({groupingPreset:t});let e=this.computeAccentBeats(t);this.patchState({accentBeats:e})}computeAccentBeats(t){let{beatsPerBar:e,denominator:n}=this.getState();if(n!==8)return[0];if(t==="none")return[0];let o=t.split("+").map(p=>parseInt(p,10)).filter(p=>!isNaN(p)&&p>0),i=[],u=0;i.push(0);for(let p=0;p<o.length;p++)u+=o[p],u<e&&i.push(u);return Array.from(new Set(i)).filter(p=>p>=0&&p<e).sort((p,g)=>p-g)}toggleCell(t,e){!this.pattern[t]||this.pattern[t][e]===void 0||(this.pattern[t][e]=!this.pattern[t][e],this.patchState({currentBeatIndex:this.getState().currentBeatIndex}))}setAll(t){for(let e=0;e<this.pattern.length;e++)for(let n=0;n<this.pattern[e].length;n++)this.pattern[e][n]=t}start(){return T(this,null,function*(){this.getState().isRunning||(yield this.ensureAudio(),this.resetTransport(),this.patchState({isRunning:!0}),this.zone.runOutsideAngular(()=>{this.schedulerSub=A(this.lookaheadMs).subscribe(()=>this.schedulerTick())}))})}stop(){this.getState().isRunning&&(this.schedulerSub?.unsubscribe(),this.schedulerSub=void 0,this.patchState({isRunning:!1,currentBeatIndex:0,currentLevelIndex:0}))}toggle(){this.getState().isRunning?this.stop():this.start()}rebuildPattern(){let t=this.getState().timeSignature,[e,n]=t.split("/"),o=parseInt(e,10),i=parseInt(n,10),u=i===4?4:2;this.pattern=Array.from({length:o},()=>Array.from({length:u},(p,g)=>g===0)),this.patchState({beatsPerBar:o,denominator:i})}resetTransport(){let t=this.audioCtx?.currentTime??0;this.nextNoteTime=t+.05,this.beatIndex=0,this.levelIndex=0,this.patchState({currentBeatIndex:0,currentLevelIndex:0})}schedulerTick(){let t=this.audioCtx;for(;this.nextNoteTime<t.currentTime+this.scheduleAheadTime;)this.scheduleCurrentStep(this.nextNoteTime),this.advanceStep()}scheduleCurrentStep(t){let e=this.getState();if(!(this.pattern[this.beatIndex]?.[this.levelIndex]??!0)){this.zone.run(()=>{this.patchState({currentBeatIndex:this.beatIndex,currentLevelIndex:this.levelIndex})});return}let o=this.beatIndex===0,i=e.denominator===4?this.levelIndex===0:this.levelIndex===0,u=e.denominator===4?this.levelIndex===1:!1,p=e.denominator===4?this.levelIndex===2||this.levelIndex===3:this.levelIndex===1,g=880,M="square",P=.7;if(i){let lt=e.denominator===8&&e.accentBeats?.includes(this.beatIndex),ct=o&&e.accentFirstBeat,pt=lt;M="square",ct?(g=1200,P=.95):pt?(g=1e3,P=.82):(g=900,P=.72)}else u?(M="triangle",g=700,P=.55):p&&(M="sine",g=1e3,P=.35);this.playClick(t,g,M,P),this.zone.run(()=>{this.patchState({currentBeatIndex:this.beatIndex,currentLevelIndex:this.levelIndex})})}advanceStep(){let t=this.getState(),e=t.denominator===4?4:2,n=60/t.bpm,o=t.denominator===4?n/4:n/2;this.nextNoteTime+=o,this.levelIndex++,this.levelIndex>=e&&(this.levelIndex=0,this.beatIndex++,this.beatIndex>=t.beatsPerBar&&(this.beatIndex=0))}ensureAudio(){return T(this,null,function*(){this.audioCtx||(this.audioCtx=new AudioContext,this.masterGain=this.audioCtx.createGain(),this.masterGain.gain.value=.8,this.masterGain.connect(this.audioCtx.destination)),this.audioCtx.state==="suspended"&&(yield this.audioCtx.resume())})}playClick(t,e,n,o){let i=this.audioCtx,u=i.createOscillator(),p=i.createGain();u.type=n,u.frequency.setValueAtTime(e,t),p.gain.setValueAtTime(1e-4,t),p.gain.exponentialRampToValueAtTime(o,t+.002),p.gain.exponentialRampToValueAtTime(1e-4,t+this.clickMs/1e3),u.connect(p),p.connect(this.masterGain),u.start(t),u.stop(t+this.clickMs/1e3+.01)}toggleStopwatch(){this.getState().stopwatchRunning?this.pauseStopwatch():this.startStopwatch()}startStopwatch(){this.getState().stopwatchRunning||(this.stopwatchStartAt=performance.now(),this.patchState({stopwatchRunning:!0}),this.stopwatchSub?.unsubscribe(),this.zone.runOutsideAngular(()=>{this.stopwatchSub=A(100).subscribe(()=>{let t=this.stopwatchAccumulated+(performance.now()-this.stopwatchStartAt);this.zone.run(()=>this.patchState({elapsedMs:t}))})}))}pauseStopwatch(){this.getState().stopwatchRunning&&(this.stopwatchAccumulated+=performance.now()-this.stopwatchStartAt,this.stopwatchSub?.unsubscribe(),this.stopwatchSub=void 0,this.patchState({stopwatchRunning:!1,elapsedMs:this.stopwatchAccumulated}))}resetStopwatch(){this.stopwatchSub?.unsubscribe(),this.stopwatchSub=void 0,this.stopwatchAccumulated=0,this.stopwatchStartAt=0,this.patchState({stopwatchRunning:!1,elapsedMs:0})}patchState(t){this.stateSubject.next(S(S({},this.stateSubject.value),t))}getPatternsMap(){return mt(localStorage.getItem(at),{})}setPatternsMap(t){localStorage.setItem(at,JSON.stringify(t))}listPatterns(){let t=this.getPatternsMap();return Object.values(t).sort((e,n)=>n.updatedAt-e.updatedAt)}getActivePatternId(){return localStorage.getItem(R)}setActivePatternId(t){localStorage.setItem(R,t)}loadPattern(t){return this.getPatternsMap()[t]??null}deletePattern(t){let e=this.getPatternsMap();delete e[t],this.setPatternsMap(e),this.getActivePatternId()===t&&localStorage.removeItem(R)}exportCurrentPattern(t,e){let n=this.getState();return{id:ut(),name:t,updatedAt:Date.now(),bpm:n.bpm,timeSignature:n.timeSignature,accentFirstBeat:n.accentFirstBeat,groupingPreset:n.groupingPreset,selectedPreset:e,pattern:ht(this.pattern)}}savePattern(t){let e=this.getPatternsMap();e[t.id]=w(S({},t),{updatedAt:Date.now()}),this.setPatternsMap(e),this.setActivePatternId(t.id)}applyPattern(t){this.setTimeSignature(t.timeSignature),this.setBpm(t.bpm),this.setAccentFirstBeat(t.accentFirstBeat),this.setGrouping(t.groupingPreset??"none");let e=this.getState(),n=e.denominator===4?4:2;this.pattern=gt(t.pattern??[],e.beatsPerBar,n),this.setActivePatternId(t.id),e.isRunning&&this.resetTransport()}static{this.\u0275fac=function(e){return new(e||r)(H(V))}}static{this.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),at="metronome.patterns.v1",R="metronome.patterns.activeId.v1";function mt(r,m){if(!r)return m;try{return JSON.parse(r)}catch{return m}}function ut(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function ht(r){return r.map(m=>m.slice())}function gt(r,m,t){return Array.from({length:m},(n,o)=>{let i=r?.[o]??[];return Array.from({length:t},(u,p)=>!!i[p])})}function ft(r,m){if(r&1&&(a(0,"option",37),c(1),s()),r&2){let t=m.$implicit;d("value",t),l(),C(t)}}function bt(r,m){if(r&1&&(a(0,"option",38),c(1),b(2,"translate"),s()),r&2){let t=m.$implicit;d("ngValue",t.value),l(),f(" ",_(2,2,t.labelKey)," ")}}function _t(r,m){if(r&1&&(a(0,"option",38),c(1),s()),r&2){let t=m.$implicit;d("ngValue",t.id),l(),f(" ",t.name," ")}}function xt(r,m){if(r&1&&(a(0,"option",37),c(1),s()),r&2){let t=m.$implicit;d("value",t),l(),C(t)}}function vt(r,m){if(r&1){let t=E();a(0,"div",39)(1,"div",40)(2,"select",41),h("ngModelChange",function(n){y(t);let o=v();return B(o.onGroupingChange(n))}),x(3,xt,2,2,"option",10),s(),a(4,"div",42),c(5),b(6,"translate"),s()()()}if(r&2){let t=v();l(2),d("ngModel",t.state().groupingPreset),l(),d("ngForOf",t.groupings()),l(2),f(" ",_(6,3,"GROUPING_HINT")," ")}}function Pt(r,m){if(r&1){let t=E();a(0,"button",45),h("click",function(){let n=y(t).index,o=v().index,i=v();return B(i.toggleCell(o,n))}),a(1,"span",46),c(2),s()()}if(r&2){let t=m.index,e=v().index,n=v();N("off",!n.pattern[e][t])("hit",n.state().isRunning&&n.state().currentBeatIndex===e&&n.state().currentLevelIndex===t&&n.pattern[e][t]),d("ngClass",n.levelClass(t)),l(2),C(n.cellText(e,t))}}function St(r,m){if(r&1&&(a(0,"div",43),x(1,Pt,3,6,"button",44),s()),r&2){let t=m.$implicit,e=m.index,n=v();N("active-now",n.isBeatActiveNow(e))("group-start",n.isGroupStart(e)),l(),d("ngForOf",t)}}var Rt=(()=>{class r{applyPreset(t){this.selectedPreset=t,this.metro.applyPreset(t)}isBeatActiveNow(t){let e=this.state();return e.isRunning&&e.currentBeatIndex===t}constructor(){this.metro=I(st),this.i18n=I(it),this.appTitleService=I(F),this.state=O(this.metro.getState()),this.sub=this.metro.state$.subscribe(e=>this.state.set(e)),this.patterns=O([]),this.activePatternId=O(""),this.timeSignatures=["2/4","3/4","4/4","6/8","8/8"],this.levels=j(()=>this.state().denominator===4?["1/4","1/8","1/16","1/16"]:["1/8","1/16"]),this.presetOptions=[{value:"mainOnly",labelKey:"PRESET_MAIN_ONLY"},{value:"allAnd",labelKey:"PRESET_ALL_AND"},{value:"allSixteenth",labelKey:"PRESET_ALL_SIXTEENTH"},{value:"andAndSixteenth",labelKey:"PRESET_AND_AND_SIXTEENTH"}],this.selectedPreset="mainOnly",this.appTitleService.setTitle("Metronome"),this.i18n.use("en"),this.refreshPatterns();let t=this.metro.getActivePatternId();if(t){let e=this.metro.loadPattern(t);e&&(this.metro.applyPattern(e),this.activePatternId.set(e.id),e.selectedPreset&&(this.selectedPreset=e.selectedPreset))}}ngOnDestroy(){this.sub.unsubscribe(),this.stopBpmHold()}refreshPatterns(){this.patterns.set(this.metro.listPatterns()),this.activePatternId.set(this.metro.getActivePatternId()??"")}onSelectPattern(t){if(!t)return;let e=this.metro.loadPattern(t);e&&(this.metro.applyPattern(e),this.activePatternId.set(e.id),e.selectedPreset&&(this.selectedPreset=e.selectedPreset),this.refreshPatterns())}savePatternOverwrite(){let t=this.activePatternId();if(!t){this.savePatternAs();return}let e=this.metro.loadPattern(t);if(!e){this.savePatternAs();return}let n=this.metro.exportCurrentPattern(e.name,this.selectedPreset),o=w(S({},n),{id:e.id,name:e.name});this.metro.savePattern(o),this.activePatternId.set(e.id),this.refreshPatterns()}savePatternAs(){let t=prompt("Pattern name","Practice");if(!t)return;let e=this.metro.exportCurrentPattern(t,this.selectedPreset);this.metro.savePattern(e),this.activePatternId.set(e.id),this.refreshPatterns()}deletePattern(){let t=this.activePatternId();if(!t)return;let n=this.metro.loadPattern(t)?.name??t;confirm(`Delete Pattern: ${n} ?`)&&(this.metro.deletePattern(t),this.activePatternId.set(this.metro.getActivePatternId()??""),this.refreshPatterns())}toggle(){this.metro.toggle()}stop(){this.metro.stop()}onBpmChange(t){this.metro.setBpm(t)}onSigChange(t){this.metro.setTimeSignature(t)}onPresetChange(t){let n=t.target?.value;n&&this.applyPreset(n)}onAccentChange(t){this.metro.setAccentFirstBeat(t)}toggleCell(t,e){this.metro.toggleCell(t,e)}get pattern(){return this.metro.getPattern()}setLang(t){this.i18n.use(t)}formatElapsed(t){let e=Math.floor(t/1e3),n=Math.floor(e/60),o=e%60,i=Math.floor(t%1e3/100);return`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}.${i}`}isPlayingCell(t,e){let n=this.state();return n.isRunning&&n.currentBeatIndex===t&&n.currentLevelIndex===e}groupings(){return this.metro.getAvailableGroupings()}onGroupingChange(t){this.metro.setGrouping(t)}cellText(t,e){return this.state().denominator===4?e===0?String(t+1):e===1?"e":e===2?"and":"r":e===0?String(t+1):"a"}levelClass(t){return this.state().denominator===4?["lvl-main","lvl-e","lvl-and","lvl-r"][t]??"":t===0?"lvl-main":"lvl-a"}isBeatActive(t){let e=this.pattern?.[t];return!!e&&e.some(n=>n)}isGroupStart(t){let e=this.state();return Array.isArray(e.accentBeats)&&e.accentBeats.includes(t)}bpmMinus(){this.metro.setBpm(this.state().bpm-1)}bpmPlus(){this.metro.setBpm(this.state().bpm+1)}startBpmHold(t,e){e?.preventDefault(),e?.stopPropagation(),this.metro.setBpm(this.state().bpm+t),window.clearTimeout(this.bpmHoldTimeout),window.clearInterval(this.bpmHoldInterval),this.bpmHoldTimeout=window.setTimeout(()=>{let n=0;this.bpmHoldInterval=window.setInterval(()=>{n++;let o=n>18?5:n>10?2:1;this.metro.setBpm(this.state().bpm+t*o)},90)},250)}stopBpmHold(){window.clearTimeout(this.bpmHoldTimeout),window.clearInterval(this.bpmHoldInterval),this.bpmHoldTimeout=void 0,this.bpmHoldInterval=void 0}toggleStopwatch(){this.metro.toggleStopwatch()}resetStopwatch(){this.metro.resetStopwatch()}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=D({type:r,selectors:[["app-metronome"]],features:[z([F])],decls:68,vars:34,consts:[[1,"container","py-2","metronome-wrap"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"m-0"],[1,"fa-solid","fa-music","me-2"],[1,"d-flex","align-items-center","gap-1"],[1,"btn","btn-outline-secondary","btn-sm","px-2",3,"click"],[1,"row","g-2","align-items-center"],[1,"col-12","col-md-6","d-flex","align-items-center","gap-2","flex-wrap"],[1,"form-label","small","mb-0","sig-label"],[1,"form-select","form-select-sm","sig-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","play-btn",3,"click"],[1,"btn","btn-outline-danger","btn-sm","stop-btn",3,"click"],[1,"form-select","form-select-sm","preset-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-select","form-select-sm","pattern-select",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],["title","Save",1,"btn","btn-outline-secondary","btn-sm","px-2",3,"click"],["title","Save As",1,"btn","btn-outline-secondary","btn-sm","px-2",3,"click"],["title","Delete",1,"btn","btn-outline-danger","btn-sm","px-2",3,"click"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"small"],[1,"tempo-row"],[1,"btn","btn-outline-secondary","btn-circle",3,"pointerdown","pointerup","pointercancel","pointerleave"],["type","range","min","20","max","300",1,"form-range","tempo-range",3,"ngModelChange","ngModel"],[1,"form-check","small"],["id","accent","type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel"],["for","accent",1,"form-check-label"],[1,"mt-2"],[1,"grid-outer",3,"ngClass"],["class","beat-col",3,"active-now","group-start",4,"ngFor","ngForOf"],[1,"timer-badge"],[1,"timer-text"],[1,"fa-regular","fa-clock","me-1"],[1,"btn","btn-light","btn-xs",3,"click"],[3,"value"],[3,"ngValue"],[1,"col-12","col-md-6"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"form-select","form-select-sm","grouping-select",3,"ngModelChange","ngModel"],[1,"form-text","tiny-hint","m-0"],[1,"beat-col"],["type","button","class","cell",3,"ngClass","off","hit","click",4,"ngFor","ngForOf"],["type","button",1,"cell",3,"click","ngClass"],[1,"cell-label"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h5",2),k(3,"i",3),c(4),b(5,"translate"),s(),a(6,"div",4)(7,"button",5),h("click",function(){return n.setLang("en")}),c(8,"EN"),s(),a(9,"button",5),h("click",function(){return n.setLang("zh")}),c(10,"\u4E2D\u6587"),s()()(),a(11,"div",6)(12,"div",7)(13,"label",8),c(14),b(15,"translate"),s(),a(16,"select",9),h("ngModelChange",function(i){return n.onSigChange(i)}),x(17,ft,2,2,"option",10),s(),a(18,"button",11),h("click",function(){return n.toggle()}),c(19),b(20,"translate"),b(21,"translate"),s(),a(22,"button",12),h("click",function(){return n.stop()}),c(23," Stop "),s(),a(24,"select",13),h("ngModelChange",function(i){return n.selectedPreset=i,n.applyPreset(i)}),x(25,bt,3,4,"option",14),s(),a(26,"select",15),h("ngModelChange",function(i){return n.onSelectPattern(i)}),a(27,"option",16),c(28,"Pattern"),s(),x(29,_t,2,2,"option",14),s(),a(30,"button",17),h("click",function(){return n.savePatternOverwrite()}),c(31," Save "),s(),a(32,"button",18),h("click",function(){return n.savePatternAs()}),c(33," Save As "),s(),a(34,"button",19),h("click",function(){return n.deletePattern()}),c(35," Del "),s()(),x(36,vt,7,5,"div",20),a(37,"div",21)(38,"div",22)(39,"div",23),c(40),b(41,"translate"),a(42,"strong"),c(43),s()()(),a(44,"div",24)(45,"button",25),h("pointerdown",function(i){return n.startBpmHold(-1,i)})("pointerup",function(){return n.stopBpmHold()})("pointercancel",function(){return n.stopBpmHold()})("pointerleave",function(){return n.stopBpmHold()}),c(46," \u2212 "),s(),a(47,"input",26),h("ngModelChange",function(i){return n.onBpmChange(i)}),s(),a(48,"button",25),h("pointerdown",function(i){return n.startBpmHold(1,i)})("pointerup",function(){return n.stopBpmHold()})("pointercancel",function(){return n.stopBpmHold()})("pointerleave",function(){return n.stopBpmHold()}),c(49," + "),s()()(),a(50,"div",21)(51,"div",27)(52,"input",28),h("ngModelChange",function(i){return n.onAccentChange(i)}),s(),a(53,"label",29),c(54),b(55,"translate"),s()()()(),a(56,"div",30)(57,"div",31),x(58,St,2,5,"div",32),s()(),a(59,"div",33)(60,"span",34),k(61,"i",35),c(62),s(),a(63,"button",36),h("click",function(){return n.toggleStopwatch()}),c(64),b(65,"translate"),s(),a(66,"button",36),h("click",function(){return n.resetStopwatch()}),c(67," Reset "),s()()()),e&2&&(l(4),f("",_(5,20,"TITLE")," "),l(10),C(_(15,22,"SIG")),l(2),d("ngModel",n.state().timeSignature),l(),d("ngForOf",n.timeSignatures),l(2),f(" ",n.state().isRunning?_(20,24,"PAUSE"):_(21,26,"PLAY")," "),l(5),d("ngModel",n.selectedPreset),l(),d("ngForOf",n.presetOptions),l(),d("ngModel",n.activePatternId()),l(),d("ngValue",""),l(2),d("ngForOf",n.patterns()),l(7),d("ngIf",n.state().denominator===8),l(4),f(" ",_(41,28,"BPM"),": "),l(3),C(n.state().bpm),l(4),d("ngModel",n.state().bpm),l(5),d("ngModel",n.state().accentFirstBeat),l(2),f(" ",_(55,30,"ACCENT_FIRST")," "),l(3),d("ngClass","beats-"+n.state().beatsPerBar),l(),d("ngForOf",n.pattern),l(4),f("",n.formatElapsed(n.state().elapsedMs)," "),l(2),f(" ",n.state().stopwatchRunning?_(65,32,"PAUSE"):"Start"," "))},dependencies:[U,$,q,K,nt,tt,et,X,Q,J,W,Y,Z,rt,ot],styles:['@charset "UTF-8";.metronome-wrap[_ngcontent-%COMP%]{background:#fff;--orange-main: #ff6a00;--orange-and: #ff9a3d;--orange-light: #ffd6b3;--hit-blue: rgba(13, 110, 253, .95)}.sig-label[_ngcontent-%COMP%]{min-width:40px;color:#0009}.sig-select[_ngcontent-%COMP%]{width:160px}.play-btn[_ngcontent-%COMP%]{min-width:140px;white-space:nowrap;padding:.4rem 1.05rem}.stop-btn[_ngcontent-%COMP%]{min-width:78px;white-space:nowrap}.preset-select[_ngcontent-%COMP%]{width:240px;white-space:nowrap}.grouping-select[_ngcontent-%COMP%]{width:190px}.tiny-hint[_ngcontent-%COMP%]{font-size:11px;opacity:.75}.tempo-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.btn-circle[_ngcontent-%COMP%]{touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none;width:38px;height:38px;border-radius:999px;padding:0;display:inline-flex;align-items:center;justify-content:center;font-weight:900;line-height:1}.tempo-range[_ngcontent-%COMP%]{flex:1;margin:0}.grid-outer[_ngcontent-%COMP%]{background:#fff;display:flex;flex-wrap:nowrap;gap:10px;overflow-x:auto;padding:8px 90px 8px 8px;border:none;width:100%;margin:0 auto;max-width:1400px;scroll-padding-right:90px}.grid-outer[_ngcontent-%COMP%]:after{content:"";flex:0 0 90px}.beat-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;padding:0;background:#fff;border:none;border-radius:12px;flex:0 0 78px;min-width:78px;position:relative}.beat-col.active-now[_ngcontent-%COMP%]{background:#ffa14a2e}.beat-col.group-start[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:8px;bottom:8px;width:2px;border-radius:2px;background:linear-gradient(to bottom,#0000,#0000000f 20% 80%,#0000);pointer-events:none}.grid-outer.beats-4[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(100px,22%,260px);max-width:clamp(100px,22%,260px);min-width:clamp(100px,22%,260px)}.grid-outer.beats-6[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(60px,14%,180px);max-width:clamp(60px,14%,180px);min-width:clamp(60px,14%,180px)}.grid-outer.beats-8[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(45px,12%,160px);max-width:clamp(45px,12%,160px);min-width:clamp(45px,12%,160px)}.cell[_ngcontent-%COMP%]{width:100%;height:46px;border:none;border-radius:0;background:#fff;padding:0}.beat-col[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px;border-top-right-radius:12px}.beat-col[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:12px;border-bottom-right-radius:12px}.cell-label[_ngcontent-%COMP%]{font-size:15px;font-weight:800;color:#111;-webkit-user-select:none;user-select:none}.cell.off[_ngcontent-%COMP%]{background:#fff}.cell.off[_ngcontent-%COMP%]   .cell-label[_ngcontent-%COMP%]{color:#fff}.beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-main[_ngcontent-%COMP%]:not(.off){background:var(--orange-main)}.beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-and[_ngcontent-%COMP%]:not(.off), .beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-a[_ngcontent-%COMP%]:not(.off){background:var(--orange-and)}.beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-e[_ngcontent-%COMP%]:not(.off), .beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-r[_ngcontent-%COMP%]:not(.off){background:var(--orange-light)}.beat-col.active-now[_ngcontent-%COMP%]   .cell.lvl-main[_ngcontent-%COMP%]:not(.off)   .cell-label[_ngcontent-%COMP%]{color:#111}.beat-col.active-now[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:not(.off)   .cell-label[_ngcontent-%COMP%]{color:#111}.beat-col.active-now[_ngcontent-%COMP%]   .cell.hit[_ngcontent-%COMP%]:not(.off){outline:3px solid var(--hit-blue);outline-offset:-3px;position:relative;z-index:1}.beat-col.active-now[_ngcontent-%COMP%]   .cell.off.hit[_ngcontent-%COMP%]{outline:none}.timer-badge[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:10px;z-index:999;display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;background:#000000b8;color:#fff;font-size:13px}.timer-text[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.btn-xs[_ngcontent-%COMP%]{padding:3px 12px;font-size:13px;line-height:1.4;border-radius:999px;white-space:nowrap}.pattern-select[_ngcontent-%COMP%]{width:220px;white-space:nowrap}@media(max-width:576px){.sig-select[_ngcontent-%COMP%]{width:170px}.play-btn[_ngcontent-%COMP%]{min-width:150px}.preset-select[_ngcontent-%COMP%]{width:230px}.grid-outer[_ngcontent-%COMP%]{width:90vw;max-width:none;gap:6px;padding:6px 110px 6px 6px;overflow-x:auto;-webkit-overflow-scrolling:touch;touch-action:pan-x;scroll-padding-right:110px}.grid-outer[_ngcontent-%COMP%]:after{content:"";flex:0 0 110px}.grid-outer.beats-4[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(78px,22%,140px);max-width:clamp(78px,22%,140px);min-width:clamp(78px,22%,140px)}.grid-outer.beats-6[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(60px,14%,120px);max-width:clamp(60px,14%,120px);min-width:clamp(60px,14%,120px)}.grid-outer.beats-8[_ngcontent-%COMP%]   .beat-col[_ngcontent-%COMP%]{flex:0 0 clamp(45px,12%,105px);max-width:clamp(45px,12%,105px);min-width:clamp(45px,12%,105px)}.cell[_ngcontent-%COMP%]{height:40px}.cell-label[_ngcontent-%COMP%]{font-size:13px}.btn-circle[_ngcontent-%COMP%]{width:34px;height:34px}.pattern-select[_ngcontent-%COMP%]{width:210px}}']})}}return r})();export{Rt as MetronomeComponent};
